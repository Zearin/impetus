!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=.04,i=.11;window.addEventListener("touchmove",function(){});var u=function e(t){function u(){L.call(w,j,G)}function s(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function d(e){var t=s(e);K||N||(K=!0,O=!1,k=t.id,P=U=t.x,R=V=t.y,Q=[],v(P,R),document.addEventListener("touchmove",c),document.addEventListener("touchend",a),document.addEventListener("touchcancel",f),document.addEventListener("mousemove",c),document.addEventListener("mouseup",a),document.addEventListener("mouseout",a))}function c(e){e.preventDefault();var t=s(e);K&&t.id===k&&(U=t.x,V=t.y,v(P,R),l())}function a(e){var t=s(e);K&&t.id===k&&f()}function f(){K=!1,v(P,R),p(),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",a),document.removeEventListener("touchcancel",f),document.removeEventListener("mouseup",a),document.removeEventListener("mouseout",a),document.removeEventListener("mousemove",c)}function v(e,t){for(var n=Date.now();Q.length>0&&!(n-Q[0].time<=100);)Q.shift();Q.push({x:e,y:t,time:n})}function m(){var e=U-P,t=V-R;if(j+=e*M,G+=t*M,A){var n=y();0!==n.x&&(j-=e*h(n.x)*M),0!==n.y&&(G-=t*h(n.y)*M)}else y(!0);u(),P=U,R=V,J=!1}function h(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function l(){J||r(m),J=!0}function y(e){var t=0,n=0;return void 0!==F&&j<F?t=F-j:void 0!==I&&j>I&&(t=I-j),void 0!==S&&G<S?n=S-G:void 0!==D&&G>D&&(n=D-G),e&&(0!==t&&(j=t>0?F:I),0!==n&&(G=n>0?S:D)),{x:t,y:n,inBounds:0===t&&0===n}}function p(){var e=Q[0],t=Q[Q.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/M;z=n/u||0,C=o/u||0;var s=y();(Math.abs(z)>1||Math.abs(C)>1||!s.inBounds)&&(O=!0,r(x))}function x(){if(O){z*=g,C*=g,j+=z,G+=C;var e=y();if(Math.abs(z)>H||Math.abs(C)>H||!e.inBounds){if(A){if(0!==e.x)if(e.x*z<=0)z+=e.x*o;else{var t=e.x>0?2.5:-2.5;z=(e.x+t)*i}if(0!==e.y)if(e.y*C<=0)C+=e.y*o;else{var t=e.y>0?2.5:-2.5;C=(e.y+t)*i}}else 0!==e.x&&(j=e.x>0?F:I,z=0),0!==e.y&&(G=e.y>0?S:D,C=0);u(),r(x)}else O=!1}}var E=t.source,w=void 0===E?document:E,L=t.update,b=t.multiplier,M=void 0===b?1:b,T=t.friction,g=void 0===T?.92:T,B=t.initialValues,q=t.boundX,X=t.boundY,Y=t.bounce,A=void 0===Y||Y;n(this,e);var F,I,S,D,P,R,U,V,k,z,C,j=0,G=0,H=.3*M,J=!1,K=!1,N=!1,O=!1,Q=[];!function(){if(!(w="string"==typeof w?document.querySelector(w):w))throw new Error("IMPETUS: source not found.");if(!L)throw new Error("IMPETUS: update function not defined.");B&&(B[0]&&(j=B[0]),B[1]&&(G=B[1]),u()),q&&(F=q[0],I=q[1]),X&&(S=X[0],D=X[1]),w.addEventListener("touchstart",d),w.addEventListener("mousedown",d)}(),this.destroy=function(){return w.removeEventListener("touchstart",d),w.removeEventListener("mousedown",d),null},this.pause=function(){K=!1,N=!0},this.resume=function(){N=!1},this.setValues=function(e,t){"number"==typeof e&&(j=e),"number"==typeof t&&(G=t)},this.setMultiplier=function(e){M=e,H=.3*M},this.setBoundX=function(e){F=e[0],I=e[1]},this.setBoundY=function(e){S=e[0],D=e[1]}};t.exports=u;var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});